<% content_for(:title, @diary.title) %>

<div id="flash-messages" >
  <%= render "shared/flash_messages" %>
</div>

<div class="border rounded-lg shadow-md p-6 w-full max-w-4xl mx-auto">
  <div class="flex items-center space-x-6">
    <!-- ユーザーアイコン -->
    <div class="w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center text-lg text-gray-600">
      noimage
    </div>
    <!-- タイトルと日付 -->
    <div class="flex-1">
      <h2 class="text-2xl font-semibold"><%= @diary.title %></h2>
      <p class="text-gray-500 text-sm mt-2">
        <%= @diary.created_at.strftime("%Y年%m月%d日 %H:%M") %>
        <% if @diary.weather.present? %>
          <!-- 天気アイコン（天気情報がある場合のみ表示）-->
          <i class="fas 
            <%= 
              case @diary.weather
              when "sunny"
                "fa-sun"
              when "cloudy"
                "fa-cloud"
              when "rainy"
                "fa-umbrella"
              else
                ""
              end 
            %>"></i>
        <% end %>
      </p>
    </div>
  </div>

  <!-- 本文 -->
  <div class="border p-6 mt-6 bg-gray-50">
    <%= @diary.body %>
  </div>

  <!-- ボタン -->
  <div class="flex justify-between items-center mt-6">
    <div class="space-x-4">
      <%= link_to t("helpers.submit.edit"), edit_diary_path(@diary), class: "border px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm" %>
      <%= link_to t("helpers.submit.delete"), diary_path(@diary), id: "button-delete-#{@diary.id}", data: { turbo_method: :delete, turbo_confirm: t('defaults.delete_confirm') } , class: "border px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm" %>
    </div>
    
    <div class="flex space-x-6 text-gray-600 items-center">
  <!-- ✅ ブックマークボタン & カウント -->
  <div class="flex items-center space-x-1">
    <%= render 'bookmark_buttons', { diary: @diary } %>
  </div>

  <!-- ✅ コメントアイコン & カウント -->
<div id="comment-count-<%= @diary.id %>" class="flex items-center space-x-1">
  <i class="fas fa-comment"></i>
  <span><%= @diary.comments.count %></span>
</div>


</div>

  </div>
</div>

<div id="table-comment">
  <%= render 'comments/form', comment: @comment, diary: @diary %>

  <div id="comments-list">
    <%= render partial: 'comments/comment_list', locals: { comments: @comments } %>
  </div>
</div>
